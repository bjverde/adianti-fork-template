function base64_encode(stringToEncode){var encodeUTF8string=function(str){return encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function toSolidBytes(match,p1){return String.fromCharCode("0x"+p1)})};if(typeof window!=="undefined"){if(typeof window.btoa!=="undefined"){return window.btoa(encodeUTF8string(stringToEncode))}}else{return new Buffer(stringToEncode).toString("base64")}var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1;var o2;var o3;var h1;var h2;var h3;var h4;var bits;var i=0;var ac=0;var enc="";var tmpArr=[];if(!stringToEncode){return stringToEncode}stringToEncode=encodeUTF8string(stringToEncode);do{o1=stringToEncode.charCodeAt(i++);o2=stringToEncode.charCodeAt(i++);o3=stringToEncode.charCodeAt(i++);bits=o1<<16|o2<<8|o3;h1=bits>>18&63;h2=bits>>12&63;h3=bits>>6&63;h4=bits&63;tmpArr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4)}while(i<stringToEncode.length);enc=tmpArr.join("");var r=stringToEncode.length%3;return(r?enc.slice(0,r-3):enc)+"===".slice(r||3)}function base64_decode(encodedData){var decodeUTF8string=function(str){return decodeURIComponent(str.split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))};if(typeof window!=="undefined"){if(typeof window.atob!=="undefined"){return decodeUTF8string(window.atob(encodedData))}}else{return new Buffer(encodedData,"base64").toString("utf-8")}var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1;var o2;var o3;var h1;var h2;var h3;var h4;var bits;var i=0;var ac=0;var dec="";var tmpArr=[];if(!encodedData){return encodedData}encodedData+="";do{h1=b64.indexOf(encodedData.charAt(i++));h2=b64.indexOf(encodedData.charAt(i++));h3=b64.indexOf(encodedData.charAt(i++));h4=b64.indexOf(encodedData.charAt(i++));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>16&255;o2=bits>>8&255;o3=bits&255;if(h3===64){tmpArr[ac++]=String.fromCharCode(o1)}else if(h4===64){tmpArr[ac++]=String.fromCharCode(o1,o2)}else{tmpArr[ac++]=String.fromCharCode(o1,o2,o3)}}while(i<encodedData.length);dec=tmpArr.join("");return decodeUTF8string(dec.replace(/\0+$/,""))}function number_format(number,decimals,decPoint,thousandsSep){number=(number+"").replace(/[^0-9+\-Ee.]/g,"");var n=!isFinite(+number)?0:+number;var prec=!isFinite(+decimals)?0:Math.abs(decimals);var sep=typeof thousandsSep==="undefined"?",":thousandsSep;var dec=typeof decPoint==="undefined"?".":decPoint;var s="";var toFixedFix=function(n,prec){if((""+n).indexOf("e")===-1){return+(Math.round(n+"e+"+prec)+"e-"+prec)}else{var arr=(""+n).split("e");var sig="";if(+arr[1]+prec>0){sig="+"}return(+(Math.round(+arr[0]+"e"+sig+(+arr[1]+prec))+"e-"+prec)).toFixed(prec)}};s=(prec?toFixedFix(n,prec).toString():""+Math.round(n)).split(".");if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep)}if((s[1]||"").length<prec){s[1]=s[1]||"";s[1]+=new Array(prec-s[1].length+1).join("0")}return s.join(dec)}function urlencode(str){str=str+"";return encodeURIComponent(str).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/~/g,"%7E").replace(/%20/g,"+")}function urldecode(str){return decodeURIComponent((str+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}).replace(/\+/g,"%20"))}function serialize(mixedValue){let val,key,okey;let ktype="";let vals="";let count=0;const _utf8Size=function(str){return~-encodeURI(str).split(/%..|./).length};const _getType=function(inp){let match;let key;let cons;let types;let type=typeof inp;if(type==="object"&&!inp){return"null"}if(type==="object"){if(!inp.constructor){return"object"}cons=inp.constructor.toString();match=cons.match(/(\w+)\(/);if(match){cons=match[1].toLowerCase()}types=["boolean","number","string","array"];for(key in types){if(cons===types[key]){type=types[key];break}}}return type};const type=_getType(mixedValue);switch(type){case"function":val="";break;case"boolean":val="b:"+(mixedValue?"1":"0");break;case"number":val=(Math.round(mixedValue)===mixedValue?"i":"d")+":"+mixedValue;break;case"string":val="s:"+_utf8Size(mixedValue)+':"'+mixedValue+'"';break;case"array":case"object":val="a";for(key in mixedValue){if(mixedValue.hasOwnProperty(key)){ktype=_getType(mixedValue[key]);if(ktype==="function"){continue}okey=key.match(/^[0-9]+$/)?parseInt(key,10):key;vals+=serialize(okey)+serialize(mixedValue[key]);count++}}val+=":"+count+":{"+vals+"}";break;case"undefined":default:val="N";break}if(type!=="object"&&type!=="array"){val+=";"}return val}function unserialize(data){var utf8Overhead=function(str){var s=str.length;for(var i=str.length-1;i>=0;i--){var code=str.charCodeAt(i);if(code>127&&code<=2047){s++}else if(code>2047&&code<=65535){s+=2}if(code>=56320&&code<=57343){i--}}return s-1};var readUntil=function(data,offset,stopchr){var i=2;var buf=[];var chr=data.slice(offset,offset+1);while(chr!==stopchr){if(i+offset>data.length){throw Error("Invalid")}buf.push(chr);chr=data.slice(offset+(i-1),offset+i);i+=1}return[buf.length,buf.join("")]};var readChrs=function(data,offset,length){var i,chr,buf;buf=[];for(i=0;i<length;i++){chr=data.slice(offset+(i-1),offset+i);buf.push(chr);length-=utf8Overhead(chr)}return[buf.length,buf.join("")]};function _unserialize(data,offset){var dtype;var dataoffset;var keyandchrs;var keys;var contig;var length;var array;var obj;var readdata;var readData;var ccount;var stringlength;var i;var key;var kprops;var kchrs;var vprops;var vchrs;var value;var chrs=0;var typeconvert=function(x){return x};if(!offset){offset=0}dtype=data.slice(offset,offset+1);dataoffset=offset+2;switch(dtype){case"i":typeconvert=function(x){return parseInt(x,10)};readData=readUntil(data,dataoffset,";");chrs=readData[0];readdata=readData[1];dataoffset+=chrs+1;break;case"b":typeconvert=function(x){const value=parseInt(x,10);switch(value){case 0:return false;case 1:return true;default:throw SyntaxError("Invalid boolean value")}};readData=readUntil(data,dataoffset,";");chrs=readData[0];readdata=readData[1];dataoffset+=chrs+1;break;case"d":typeconvert=function(x){return parseFloat(x)};readData=readUntil(data,dataoffset,";");chrs=readData[0];readdata=readData[1];dataoffset+=chrs+1;break;case"n":readdata=null;break;case"s":ccount=readUntil(data,dataoffset,":");chrs=ccount[0];stringlength=ccount[1];dataoffset+=chrs+2;readData=readChrs(data,dataoffset+1,parseInt(stringlength,10));chrs=readData[0];readdata=readData[1];dataoffset+=chrs+2;if(chrs!==parseInt(stringlength,10)&&chrs!==readdata.length){throw SyntaxError("String length mismatch")}break;case"a":readdata={};keyandchrs=readUntil(data,dataoffset,":");chrs=keyandchrs[0];keys=keyandchrs[1];dataoffset+=chrs+2;length=parseInt(keys,10);contig=true;for(i=0;i<length;i++){kprops=_unserialize(data,dataoffset);kchrs=kprops[1];key=kprops[2];dataoffset+=kchrs;vprops=_unserialize(data,dataoffset);vchrs=vprops[1];value=vprops[2];dataoffset+=vchrs;if(key!==i){contig=false}readdata[key]=value}if(contig){array=new Array(length);for(i=0;i<length;i++){array[i]=readdata[i]}readdata=array}dataoffset+=1;break;case"O":{readData=readUntil(data,dataoffset,":");dataoffset+=readData[0]+1;readData=readUntil(data,dataoffset,":");if(readData[1]!=='"stdClass"'){throw Error("Unsupported object type: "+readData[1])}dataoffset+=readData[0]+1;readData=readUntil(data,dataoffset,":");keys=parseInt(readData[1],10);dataoffset+=readData[0]+2;obj={};for(i=0;i<keys;i++){readData=_unserialize(data,dataoffset);key=readData[2];dataoffset+=readData[1];readData=_unserialize(data,dataoffset);dataoffset+=readData[1];obj[key]=readData[2]}dataoffset+=1;readdata=obj;break}default:throw SyntaxError("Unknown / Unhandled data type(s): "+dtype)}return[dtype,dataoffset-offset,typeconvert(readdata)]}try{if(typeof data!=="string"){return false}return _unserialize(data,0)[2]}catch(err){console.error(err);return false}}function str_pad(input,padLength,padString,padType){var half="";var padToGo;var _strPadRepeater=function(s,len){var collect="";while(collect.length<len){collect+=s}collect=collect.substr(0,len);return collect};input+="";padString=padString!==undefined?padString:" ";if(padType!=="STR_PAD_LEFT"&&padType!=="STR_PAD_RIGHT"&&padType!=="STR_PAD_BOTH"){padType="STR_PAD_RIGHT"}if((padToGo=padLength-input.length)>0){if(padType==="STR_PAD_LEFT"){input=_strPadRepeater(padString,padToGo)+input}else if(padType==="STR_PAD_RIGHT"){input=input+_strPadRepeater(padString,padToGo)}else if(padType==="STR_PAD_BOTH"){half=_strPadRepeater(padString,Math.ceil(padToGo/2));input=half+input+half;input=input.substr(0,padLength)}}return input}
